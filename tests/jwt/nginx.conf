worker_processes 1;
error_log logs/error.log debug;
daemon off;
master_process off;

events {
    worker_connections 64;
}

http {
    access_log logs/access.log;

    server {
        listen 8888;

        # Protected endpoint with JWT
        location /protected {
            jwt;
            jwt_secret "my-secret-key-for-testing-hs256";
            
            echozn "Access granted";
        }

        # Public endpoint (no JWT)
        location /public {
            echozn "Public content";
        }

        # JWT with inherited secret from parent
        location /api {
            jwt_secret "api-secret-key-for-testing";
            
            location /api/users {
                jwt;
                echozn "Users list";
            }
            
            location /api/public {
                echozn "Public API";
            }
        }
    }
}
