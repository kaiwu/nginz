daemon off;
error_log logs/error.log debug;
pid logs/nginx.pid;

events {
    worker_connections 64;
}

http {
    access_log logs/access.log;

    server {
        listen 8888;

        # Service discovery - get healthy instances of a service
        location /services/ {
            consul_services 127.0.0.1:18500;
        }

        # Service discovery with fixed service name
        location /api-service {
            consul_services 127.0.0.1:18500;
            consul_service api-service;
        }

        # KV store lookup
        location /kv/ {
            consul_kv 127.0.0.1:18500;
        }

        # KV store with fixed key
        location /config/timeout {
            consul_kv 127.0.0.1:18500;
            consul_key config/app/timeout;
        }

        # Catalog - list all services
        location /catalog {
            consul_catalog 127.0.0.1:18500;
        }
    }
}
